apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
  name: funds-api
  namespace: default
spec:
  interval: 120m
  chart:
    spec:
      chart: app
      version: "0.0.51"
      sourceRef:
        kind: HelmRepository
        name: vibioh
        namespace: default
      interval: 120m
  install:
    skipCRDs: true
  maxHistory: 3
  upgrade:
    remediation:
      retries: 3
  rollback:
    cleanupOnFail: true
  values:
    nameOverride: funds-api
    image:
      name: vibioh/funds-api
      tag: "202103100914" # {"$imagepolicy": "default:flux-funds-api:tag"}
    config:
      API_LOGGER_JSON: "true"
      API_DB_HOST: funds-db
      API_DB_PORT: "80"
      API_DB_NAME: funds
      API_DB_USER: funds
    readinessProbePath: /ready
    secrets:
      API_DB_PASS: AgAIjcPIpxJWC3QJRqivmB+Hy4cRgmF7yXJkAc8PabU0ffaVf9BxjfZ4Cf4BpRVRUZNY2+itL1O008vTEmWCmPt4fLq20XPo+r+Iz03Xt2Qz1ZZUvk69b+DsnJ9DIbCXrCJN+fK6gzcDo6zlRD+5D4fXGO8ktg9HF1Kg7/NWb2n1B3YFNqqRgKUx1FAg515vyvMdGkPJb6gyB3kzkczHhbiaPa9FisixK/BZbaGYkzcI1Jt2t1eMds8VH/kKezD2hnb8qrtjfhHHpbMXYStNxuWHETzpzS8H26QYQhG7LmMjHy/HMQo1+h4+VbLNaBsbJK4woZ1vEqo/cYbDovxQwVjnnQMEs6wuAdPYRU5DXt1h8tN9FfVT+ePEJuAzOIg+WX53jk7ofnsHT0oo0Q+kOk821X+en5Tleej6oETGmokXO2rxfqG0eLXDQdB78vsT93Yq2cHVLMw1nAiYb1QfURREcTLZll+JzK1gi8OmdPz8AKdjCcnJf1jfMsjRRLmgOmojMly1xQ2yJg6x2WeG8giLU3e84fdHVoo0e09FxULv8RzqQqtiQrE03q2DC2CKR5rptwIz/d5w/CPAuxmEixPrr9z7EMnLDnePGQfRJDapR8vnp4jguYsfyCJa+EQHontBhRf97RnoSQ6MxwrZQtV4nmjB9W2f6vrZQDei3bmBHgZdzkO2dEWM37qk35m30IL2CKSbK7eMDhPttZ+t3e1D8BJ/57pgZgaS9KjsrfmAoBAM7ldCVoN8hRSVHxz8n//wuLDSWmMKof0Ixok=
      API_INFOS: AgBhyCHxSwLIJY6fy8jsbnFHq1ecmUkgKPQX672jxyeQeJpL2aLQzBKDrhICM3I2gaGRzLGRq6PjPt+qLJFHw2qlcQLw8FzdOX9gqOQiv844r3e6GUJdm8Kvz+AQbS1XXSsmzwF8EPJJz7zH1EqznGfHhJUIhM4oNsTlIOK11TYVP13jnsIradlkOvseAHniTFrNMcxO8vyk2QP3tCUFEuASr1N1IF4FLvmv+0Z4KSZcPE18kkDTHL8yIOCZK0qyAAJzoiAx/NOifMKrpia6xpFJXGkwraU+my6W0nsTjCLHj+i90lpf+JIog4q9Ey6jeByA+sduzOgIwABVehP5SbjxJ3+B6IyTuU/dljTvsE07C/gL8WiZGeIjj+Yqb0p7bDYdtk9e2T/72MI0708SX/QGS4uq+4BWgE0e2zZdlajr1yQosfuV5dCapKk2v76BF7BGXipfzU5NX2TAd2pzVp/CDz5hQnlKrUw8Xcjd2r6AWSiu64ku9ODdM4N/pqdkT7L7f0TZx/cLuZ56YB0eiZmdk+YFGqHTNm28oyp73l0JBFcT9/wN85/CICahJn/Q321FFNk/B4Md5aiayDbwvtFU3JPOxcaT1sbffkGGinKLvAqWblpAI8Aqf///NAVrcVa9JVh5aPpYMSuE2klOkZxm+vPijIqMZqJhxlmjcJAjQTSO8rMgz0ybYlGTG0rFPZD7qnb0i1O4LIolS9+wgHIX596a7FZSFEfqesZ9hj22IwNNYB6pVV9Rl0xzvaYQ16Us8NJuh6f2InWzybQvDw==
    ingress:
      enabled: true
      hosts:
      - funds-api.vibioh.fr
---
apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
  name: funds-db
  namespace: default
spec:
  interval: 120m
  chart:
    spec:
      chart: postgres
      version: "0.0.19"
      sourceRef:
        kind: HelmRepository
        name: vibioh
        namespace: default
      interval: 120m
  install:
    skipCRDs: true
  maxHistory: 3
  upgrade:
    remediation:
      retries: 3
  rollback:
    cleanupOnFail: true
  values:
    nameOverride: funds-db
    config:
      POSTGRES_USER: funds
      POSTGRES_DB: funds
    secrets:
      POSTGRES_PASSWORD: AgAxk/7hXQjutcydu6zcin5GIs5884wb9TfZeZmkvR6ZtZcjiWGkdb84c0AqdWY6TYGPH/JThzf8w9zJhTUWNE2LYfkTluaHwXHwBz9q+qq/BRM2kI87lNLJJToegNWZM6tnNO+fRxe+G7PI71Viv7I4aIPvPaS4kD6MN4/xHSjwXGxeRHFoayqFCOWUYcpqsxGQuMvW/NGtddjOBcd+zn2ZUet+NXhmHGfNLX/m/YYEfkWZGqSQ7gtMz5O9Z/BN/frJ8ry72dIlTQCd06/BamAW8Sgv5oQ41US4NRaDEVpMp8BqZMCCJuerbqp4zrvuqV+cqMgv/48KLYFX9tP8fNOMsJCetzzJ3KgbXSYAuBhWMnjaBm+J9fQRHq7ZIyo0N37ncDadAjgmGLAJUZKCfgluHI3A8a2c5OaElJPMYJunu50S+CWMQBL6ELqTOImqKIl0pP7GRt3N4wrGkFncP7Uw6gj+tg/NJ9fYVkqNp1/fCdQmk2bwWi3yV30Slkgfyudmb7bD36ow4wRmNjyemKO7KgsNln7pGSl8s54IT2BjffS62Qoy6KCPTNLP19FjkXtECtlbeOoG5XE0TfUj+xZ+NsMfLLfNmqCJ5GTZV49UhGm7Ba9ZH2H0FxROxT1kFMXUtjXcJg+hVVB1tHFdMkhr8uO8zTjU3LqLW19tLOvpbkS0bYvRzVXb8omoDiGtaMVb7KW+bc/bw6udmMMgSRkltkmDU+B8dI9k+OjepJMPkzKczUgQAT+Xc5eGFxH1E37RTGfHdiWeoXMLOFc=
      FIBR_BACKUP_PASSWORD: AgDJL16rh62Y0BOXBc1oq5+58lLGSQEiH4NfmvpfuO1uXmV0OUpHlI5oP3ikmBse8SI39c3ZzoRIjMKRJVtfz5ZwHbK30fxSVHOFiN8+knvAO8wyUmBXh87wQ/U15+2+/efYVb5Lw28vWITZZzewPFCUEUDXiuJ0fWtpCMxNReFT0TB54sv7p1+HPzzv/XHu2qxGpi+ar169XsK8bK1qdrbm9zjBUttVxnzFOxGV4R/ebJCOGSpC8DuRsaUxfv26b8Rf5yhCtEGwayheqyYKaqXTK4hQgoNrCQh0mWjoZBkAlbi6HKUB0N5MGrRJiieJv5/pnXksKAihYIZsthe17tHJKEIy07YorgyALUQ1LRkDVfTTtHLM4r43sPQIpmEDCT/n/nd5P+h7swVuAa8wb4a4o4qZITDtIHl9IpOFs9tvw5kdhuWWdpywIgH23vae6SN31b0YednGvFVVzjU2qL4G929FUZiRPr3lXUwZGdHLdXT9oFc4usDNsARgmrKWqDZSSp8dR7bdtYv1t+wlMoUnnomCiod+2kh3BKVCTTC+WetjVKdMyB8uouavYuCxj2iXIEL1ik1hVgQOIiCRabYFFD0z1rlJEhZl/+orCg8kG1HF5jK3W10gYpsLKPfEYalHt7CHU4R0LUiCSn7z+XqTxMJAu64ZmdcGR2Cc1sI3eXkMIqBa52PnpuBM2MzlT9DCPktfiS4a+7nO8/DOFdV4l0Ggb4atioAvVTb/jmkfVleJk+4g2hEv4+G54oEVSFhawjcnFvV5ADkWFCU=
