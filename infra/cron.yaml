apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
  name: funds-notifier
  namespace: default
spec:
  interval: 120m
  chart:
    spec:
      chart: cron
      version: '0.0.25'
      sourceRef:
        kind: HelmRepository
        name: vibioh
        namespace: default
      interval: 120m
  install:
    crds: Skip
  maxHistory: 3
  upgrade:
    remediation:
      retries: 3
  rollback:
    cleanupOnFail: true
  values:
    nameOverride: funds-notifier
    jobLabels:
      k8s-cleaner: 'true'
    schedule: '0 8 * * *'
    image:
      name: vibioh/funds-api
      tag: '202207310858' # {"$imagepolicy": "default:flux-funds-api:tag"}
    config:
      NOTIFIER_SCORE: '20'
      NOTIFIER_DB_HOST: funds-db
      NOTIFIER_DB_PORT: '80'
      NOTIFIER_DB_NAME: funds
      NOTIFIER_DB_USER: funds
      NOTIFIER_TRACER_URL: http://jaeger.monitoring:14268/api/traces
      OTEL_SERVICE_NAME: funds-notifier
    secrets:
      NOTIFIER_DB_PASS: AgBmxtFg0aqghfI3kXe1dEH7cMtisIP8FXksgHSxdVCvgy+wKFWalBDZCUxuYEgGGBbrwX7uhXlSvqQ2Gi8LE3GrC5EVX7xOmwhDXtM7DZAlk7dEbwwwKbd2WfKB+6++rqBIFa37HItad4FTtVLyLpWI3K7EDjU+GvNs3BQjS6mv3Z7XhFCr0A7SiuwFCdkosBr7Ik/aWpvh+26En6JFkAEUKfxIDgCp8H/T4ukojOdfL3IN68Z+1cQux19G4VwhhpNT3gjrBPXxfX5mqYWvGMpkAI7hzXurg3zY9HAAPrqXsAjbFFQEjC2Ybo6KnxeBZmtfJX90gtWNYtVatB2MTRwFz/r9QcXaMOpGrb1iL73N7sG5q3o9DGohWZ4ym1tP9FKlx0r7hGbsRTDhlcsQNhvVpCCRTK3/XIMVK7/6uI5MFHPVnTKvkQYAKkuk70gvgrzW30rA383QWkfEDKt+/eD2+bRIuOMbceWX1BJkeP2lEF2yaqt3WL2h1fwUbWucnz5k/1HBr2DjTY/U9TlJw9gMEhtF0IlND7KABgioZr0HnqfgDCGRjyy3m5vsfrCMC5rfXVMlZJDlfgdAJBT6vQ9q/CjuhbzoHcvyQBHol8YfsHN6951YY5db7ZL9yyqCo5rPSW+6+vq6qBObQuZnqQN7PJqzMdxWcw0C0nPb0ZKiUFLSTexG7/f7OPUdZkjvRPv8JUx1iwahFX8wn4cU9CCX9E7GICQVRcfnAby3ndkoTUlDN7uPZ4b9pOktbzaf2UFLlycycaYNqU0YxdE=
      NOTIFIER_RECIPIENTS: AgAu7kLALVQKseXci7gQY8yiTDz6lyPhpALXGdNHKdMZOjv2e6FblL5wLZTPNMRxDZNn9Bi6SvC0nMWfKL2pw5xkUVM6YyX3hjmvc4Ovu4GQ5mbT0owkS56UBIAh3vixVltlXa49gg8UWJWyeQMKRtoDLQWNRkois2Xr3WCWCS2gnng1QMQ2okV+1YsVJrMzPl0fPHC46Qgd30rzku5xdOyUFoGOpxJ2sgMToEVYAI1D5weDjW1xo/bbrQXsiz4oluq9quU6n1aErhenEn0PiyplW6VwPobG9bQ5iYfXDEMImMAJiLC0omMwyBCTJ++l/CAS9X5xobsBSmEQgvscQa1dE1OMgEZ869JcIdb6q5s7JmkNYV+QsRaBDoSAM7p+RuoQGYdtPpR8dbYF/4hGWPnqV1GC9w2b40SWm5sFLHjFuyKeS83mlNSAKfybY7Ief4w1EI1PYFyrsbRSZJNjuCereb18HfvfEeFeV/KkXcF9dk/VUgOa3hcjMvh58KGArDdlBxqVyJp73z9mMbpn3EvH9SDJ04U84HQfLTgGbamDRGsH9J33XHOhX3ldZg03avY+fDLOjSE2czXZtH5qziL4aXdGCLUppJ72O2Qn+o7IYLt2c8XOoR+M8bX37nERfEST9KL/ShZkoVEu+V1ArUv5E2akJHCLdj69J91GlnKuyBO32mRQ21PepdJxM/ChoQUt+qWJHRMk6c4Ufioa0eLpQUA2x+aXK7rJyIWHlUtS+5iS9zta/mrK
      NOTIFIER_MAILER_URL: AgA9uH9+tJ1HcuKpqsUMCaTdpb1zCYgH17cVZgc6smURkaKuBQIMugZTKJCTMcbLQ5I1rN8RzMolegqTqWIwmvDcamIjhr5Rs8avOqG6rSE58rXN1/3uqVqV9rMke3wqUrh3nLUYPwD+x26czSsCRz7M8cKScH4V5MJq6cbAd/yBadXiyzRyTZ6d2xmZ+P/YATG4Fr3TH554LtF89cjaOqTJE3DTDfumk3Bt9vbix/+rOZmBB+eKks35fd3e0Lmq0UUWgIVycfUlHCDff9PBA0y2XBqTXbcI/5EJnQP6MyDR/lk6mjzcKbFZ6uRA+HU6ztIJ+JQbASRnzGwoOPS4b+oCvIrUTCtMC2hQVsOOEQaTmNnkGhsRGyZ//FTLaCy9w7i5KReToajf2qjpVPjXZhSjbDa9OPk5Uxpuqc8RqZnGxtqMt99+hCxa/0jhWyKpJG1MtGTQM8Wh5MGdpd/zOaEpIKB/EnYaH9XD63gzInjnjg0czpERPwRmM8rWI1zZFPf9JnwQIjPhDSndBxNxBnbtKQ/HRDsG9pna4ipWESyNzKqD6NaUVzVriU35nC/96Lrd/DyNh/GIZYDgXlRMcwO51rQQWQgOKfm7CXbce5NQJDB3Tkokev3Ov+WQG4hVOmmbiNZlzD6aPP6MQyk0VuLPE/MPr3EG8d6PdtCPpmUl5aAVlK1ITf41FYrvnAvH24HlcfiJkDPEt+QVf58ov7rBZnCtA2pZi1kLY1Tt2wXDRm4FBW8tJhJWwnf3gl0z7/SaOXM=
    containers:
      - name: job
        command:
          - /notifier
